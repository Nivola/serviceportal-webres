<!--
  ========================LICENSE_START=================================
  Nivola Service Portal Web Resources
  %%
  Copyright (C) 2022 CSI Piemonte
  %%
  SPDX-FileCopyrightText: Copyright 2022 | CSI Piemonte
  SPDX-License-Identifier: EUPL-1.2
  =========================LICENSE_END==================================
  -->
<div layout="column" ng-cloak>
    <br />
    <md-content class="md-no-momentum">
        <md-card>
            <md-card-title>
                <div flex=20 >
                    <md-card-actions layout="row" layout-align="start center" flex="20" >
                        <md-button class="md-fab read-me "  ng-href="{{rtdmanageVolumi}}" target="_blank">
                            <md-icon  class="material-icons">local_library</md-icon>
                            <md-tooltip>{{ 'guida' | translate}}</md-tooltip>
                        </md-button>
                    </md-card-actions>
                </div>
                <md-card-title-text layout-align="center center" flex>
                    <span class="md-headline titolo-sezione">
                        <md-icon class="icon-card-header-green">dns</md-icon>{{ 'volume.dettaglio.titolo' | translate}}  <span ng-if="VolumeDetails['nvl-name']"> </span>
                    </span>
                    <div class="callout callout-info">
                    </div>
                </md-card-title-text>
                <div flex=20 ></div>
                
            </md-card-title>

            <md-card-content>
                <md-tabs md-dynamic-height md-border-bottom md-center-tabs class="tab-min-200"
                    md-selected="status.tabIndex">
                    <md-tab label="{{ 'volume.dettaglio.dettagli' | translate}}">
                        <md-content class="md-padding">
                            <div layout="row" layout-align="center start">
                                <md-card flex="80">
                                    <md-table-container>
                                        <table md-table md-progress="promise">
                                            <thead  md-head md-order="query.order">
                                                <tr md-row>
                                                    <th md-column>
                                                        <span>
                                                            {{ 'volume.dettaglio.proprieta' | translate}}
                                                        </span>
                                                    </th>
                                                    <th md-column>
                                                        <span>
                                                            {{ 'volume.dettaglio.valore' | translate}}
                                                        </span>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody md-body>
                                                <!-- FQDN (Nome VM) -->
                                                <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>save</md-icon>
                                                                <b>{{ 'volume.dettaglio.nome' | translate}}</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell>
                                                        <span
                                                            ng-if="VolumeDetails && VolumeDetails['nvl-name']">{{VolumeDetails['nvl-name'].toLowerCase()}}</span>
                                                    </td>
                                                </tr>
                                                <!-- hypervisor -->
                                                <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>miscellaneous_services</md-icon>
                                                                <b>Hypervisor</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell>
                                                        <span>{{VolumeDetails['nvl-hypervisor']}}</span>
                                                    </td>
                                                </tr>
                                                <!-- Dimensione -->
                                                <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>save</md-icon>
                                                                <b>{{ 'volume.dettaglio.dimensione' | translate}}</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell ng-if="VolumeDetails.size">
                                                        {{ VolumeDetails.size }}GB
                                                    </td>
                                                </tr>
                                                 <!-- Encrypted -->
                                                 <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>lock</md-icon>
                                                                <b>{{ 'volume.dettaglio.encrypted' | translate}}</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell >
                                                        {{ VolumeDetails.encrypted }}
                                                    </td>
                                                </tr>
                                                 <!-- multiAttachEnabled -->
                                                 <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>save</md-icon>
                                                                <b>{{ 'volume.dettaglio.multiAttachEnabled' | translate}}</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell >
                                                        {{ VolumeDetails.multiAttachEnabled }}
                                                    </td>
                                                </tr>
                                             
                                              
                                                <!-- Region - A.Z. -->
                                                <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>public</md-icon>
                                                                <b>{{ 'volume.dettaglio.region' | translate}}</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell>
                                                        {{VolumeDetails.availabilityZone}}
                                                    </td>
                                                </tr>
                                               
                                             
                                                <!-- Status -->
                                                <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>power_settings_new</md-icon>
                                                                <b>{{ 'volume.dettaglio.stato' | translate}}</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell>

                                                        <span ng-class="VolumeDetails.stato.badge">
                                                            {{VolumeDetails.stato.stato}}
                                                        </span>
                                                        
                                                    </td>
                                                </tr>



                                                 <!--Data Creazione -->
                                                 <tr md-row>
                                                    <td md-cell>
                                                        <span>
                                                            <nobr>
                                                                <md-icon>date_range</md-icon>
                                                                <b>{{ 'volume.dettaglio.data_creazione' | translate}}</b>
                                                            </nobr>
                                                        </span>
                                                    </td>
                                                    <td md-cell>
                                                        {{VolumeDetails.createTime |  date :  "dd-MM-y" }}
                                                    </td>
                                                </tr>
                                               
                                            </tbody>
                                        </table>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    
                    <md-tab label="{{ 'volume.attachment.label' | translate }}" md-on-select="onTabSelected()" md-on-deselect="onTabDeselected()">
                        <md-content class="md-padding">
                            <div layout="row" layout-align="center start">
                                <md-card flex="70">
                                    <div layout="row" layout-align="center start" style="color: #FF8C00;" ng-if="options.elencoVuoto" >
                                        {{ 'volume.attachment.no_data' | translate }}
                                    </div>
                                    <div ng-if="!options.elencoVuoto">
                                        <md-table-container>
                                            <table md-table md-progress="promise">
                                                <thead  md-head md-order="query.order">
                                                    <tr md-row>
                                                        
                                                        <th md-column>
                                                            <span>
                                                                {{ 'volume.attachment.instanceId' | translate }}
                                                            </span>
                                                        </th>

                                                        <th md-column>
                                                            <span>
                                                                {{ 'volume.attachment.status' | translate }}
                                                            </span>
                                                        </th>
                                                        <th md-column>
                                                            <span>
                                                                {{ 'volume.attachment.attachTime' | translate }}
                                                            </span>
                                                        </th>
                                                        <th md-column>
                                                            <span>
                                                                {{ 'volume.attachment.azioni' | translate }}
                                                            </span>
                                                        </th>

                                                    </tr>
                                                </thead>
                                                <tbody md-body >
                                                   
                                                        <tr md-row md-select="snapshot" md-auto-select="options.autoSelect"
                                                            ng-repeat="item in VolumeDetails.attachmentSet | filter: filter.search | orderBy: query.order | limitTo: query.limit : (query.page -1) * query.limit">
                                                            <td md-cell>
                                                                <span ng-if="item.instanceId">
                                                                    {{item.nomeIstanza}}
                                                                </span>
                                                                <span ng-if="!item.instanceId">
                                                                    N.D
                                                                </span>
                                                            </td>
                                                            <td md-cell>{{item.status}}</td>
                                                            <td md-cell>
                                                                <span ng-if="item.attachTime">
                                                                    {{item.attachTime |  date :  'dd-MM-yy, hh:mm ' }}
                                                                </span>
                                                                <span ng-if="!item.attachTime">
                                                                    N.D
                                                                </span>
                                                            </td>
                                                            <td md-cell>
                                                                <md-button class="md-icon-button  md-warn button-azioni" ng-if="item.instanceId"
                                                                    ng-click="actions.detach(VolumeDetails , item)">
                                                                    <md-icon >link_off</md-icon>
                                                                    <md-tooltip>{{ 'volume.attachment.btnDettach' | translate }}</md-tooltip>
                                                                </md-button>
                                                           
                                                                <md-button class="md-icon-button  md-primary button-azioni"  
                                                                    ng-if="!(item.instanceId && VolumeDetails.multiAttachEnabled=='false')"
                                                                    ng-click="AttachVolume(item)">
                                                                    <md-icon >add_link</md-icon>
                                                                    <md-tooltip>{{ 'volume.attachment.btnAttach' | translate }}</md-tooltip>
                                                                </md-button>
                                                            </td>
                                                        </tr>
                                                    
                                              
                                                </tbody>
                                               
                                            </table>
                                        </md-table-container>
                                    </div>



                                   
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                </md-tabs>
            </md-card-content>
            <md-divider></md-divider>
            <md-card-actions layout="row" layout-align="space-between center">
                <md-button class="animation-target md-raised  md-primary md-hue-2" ng-click="historyBack()">
                    <md-icon class="material-icons">keyboard_backspace</md-icon> {{ 'indietro' | translate}}
                </md-button>
            </md-card-actions>
        </md-card>
    </md-content>
</div>
