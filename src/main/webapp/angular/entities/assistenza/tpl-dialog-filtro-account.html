<!--
  ========================LICENSE_START=================================
  Nivola Service Portal Web Resources
  %%
  Copyright (C) 2022 Regione Piemonte
  %%
  SPDX-FileCopyrightText: Copyright 2022 | Regione Piemonte
  SPDX-License-Identifier: EUPL-1.2
  =========================LICENSE_END==================================
  -->
<md-dialog aria-label="Accredita Utente">
    <form ng-cloak>
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2>seleziona account</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="closeDialog()">
                    <md-icon class="md-icon-button" aria-label="Close dialog">close</md-icon>
                </md-button>
            </div>
        </md-toolbar>

        <md-dialog-content>
            <div class="md-dialog-content">
                <md-card>
                    <md-card-content>
                        <div layout="column">
                           

                            <md-input-container class="md-icon-float md-block ng-hide" layout="row" ng-show=" !isBORoleSelected">
                                <md-icon  ng-style="iconStyle">account_balance</md-icon>
                                <label>{{ 'utente.seleziona_organizzazione' | translate}}</label>
                                <md-select   ng-model="firstLevelEntitySelected"
                                    md-on-open="loadOrganisations()" ng-change="onFirstLevelEntitySelectedChange()"
                                    flex>
                                    <md-option ng-value="entity.uuid" ng-repeat="entity in firstLevelEntities | orderBy:'nome'">
                                        {{entity.nome}}
                                    </md-option>
                                </md-select>
                            </md-input-container>

                            <md-input-container class="md-icon-float md-block ng-hide" layout="row" ng-show=" !isBORoleSelected">
                                <md-icon  ng-style="iconStyle">group_work</md-icon>
                                <label>{{ 'utente.seleziona_divisione' | translate}}</label>
                                <md-select   ng-model="secondLevelEntitySelected"
                                    md-on-open="loadDivisions()" ng-change="onSecondLevelEntitySelectedChange()"
                                    flex>
                                    <md-option ng-value="entity.uuid" ng-repeat="entity in secondLevelEntities | orderBy:'nome'">
                                        {{entity.nome}}
                                    </md-option>
                                </md-select>
                            </md-input-container>

                            <md-input-container class="md-icon-float md-block ng-hide" layout="row" ng-show=" !isBORoleSelected">
                                <md-icon  ng-style="iconStyle">account_circle</md-icon>
                                <label>{{ 'utente.seleziona_account' | translate}}</label>
                                <md-select   ng-model="thirdLevelEntitySelected"   ng-change="onThirdLevelEntitySelectedChange()"
                                    md-on-open="loadAccounts()" 
                                    flex>
                                    <md-option ng-value="entity" ng-repeat="entity in thirdLevelEntities | orderBy:'nome'">
                                        {{entity.nome}}
                                    </md-option>
                                </md-select>
                            </md-input-container>

                          
                            

                            <md-button class="md-raised pull-right md-primary md-hue-2 ng-hide" type="button" ng-click="impostaAccount($event)"
                                ng-show="thirdLevelEntitySelected">
                                <md-icon>done</md-icon>conferma
                            </md-button>
                        </div>
                        
                        <br />

                       

                       
                </md-card>
            </div>
        </md-dialog-content>
    </form>
</md-dialog>
